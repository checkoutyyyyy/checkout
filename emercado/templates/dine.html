{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Checkout - Dine In Page</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!-- Favicons -->
  <link href="{% static 'img/consumer/cart_logo.png' %}" rel="icon">

  <!-- Google Fonts -->
  <link href='https://fonts.googleapis.com/css?family=El Messiri' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

  <!-- font awesome cdn link  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">


  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/animate.css/animate.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">


  <!-- Template Main CSS File -->
  <link href="{% static 'css/index.css' %}" rel="stylesheet" />
  <link href="{% static 'css/style.css' %}" rel="stylesheet" />
  <link href="{% static 'css/order.css' %}" rel="stylesheet" />

  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <script src="{% static '/functionJS/utility.js' %}"></script>
  <script src="{% static '/functionJS/qrcode_scanner.js' %}"></script>
  <script src="{% static '/functionJS/instascan.js' %}"></script>
  <script src="{% static '/functionJS/spinner.js' %}"></script>
  <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">


</head>

<style>
    .custom-btn{
        font-size: 22px;
        font-weight: 600;
        color: #000000;
        text-shadow: 0px 4px 4px #9688FE;
        text-align: center;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .modal-full {
            min-width: 60%;
            margin: 0;
        }
        .header__cart-heading {
        margin: -32px 52px 0px;
        white-space: initial;
    }
    button.selected-variation{
        color: #9688FE;
        border-color: #9688FE;
    }
    .emercado_background_color_whitesmoke.active {
        border: 1px solid #9688FE;
    }

    .carousel-inner .col-xs-4:hover {
        border: 1px solid #9688FE;
    }
    .emercado_background_image_1{
        background: linear-gradient(0deg, rgb(0, 0, 0, 0.5) 100%, rgb(0, 0, 0, 0.01) 100%), url('{% static "img/consumer/dine/bg/dine_bg_1.png" %}');
        height: calc(100vw * 250/1906);
        background-position: 0% 70%;
    }
    .emercado_background_image_2{
        background: linear-gradient(0deg, rgb(0, 0, 0, 0.01) 100%, rgb(0, 0, 0, 0.01) 100%), url('{% static "img/consumer/dine/bg/dine_bg_4.png" %}');
        height: calc(100vw * 100/1906);
    }
    .emercado_background_image_1, .emercado_background_image_2{
        position: relative;
        background-size: cover;
        min-height: 80px !important;
        display: flex;
        align-items: center;
    }
    /* .emercado_background{
        position: relative;
        background: linear-gradient(0deg, rgb(0, 0, 0, .05) 100%, rgb(0, 0, 0, .05) 100%), url('{% static "img/consumer/header_background.png" %}');
        background-size: cover;
    } */
    .emercado_background_order_now{
        position: relative;
        background: linear-gradient(-180deg,#9688FE,rgb(255 255 255 / 15%));
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-color: rebeccapurple;
    }
    figure.landing_img {
        font-family: 'El Messiri', sans-serif;
        position: relative;
        overflow: hidden;
        background: linear-gradient(-180deg,#9688FE,#212529);
        height: 75px !important;
        text-align: center;
    }
    figure.landing_img * {
        -webkit-box-sizing: padding-box;
        box-sizing: padding-box;
        -webkit-transition: all 0.3s ease-in-out;
        transition: all 0.3s ease-in-out;
    }
    figure.landing_img img {
        width: 100%;
        object-fit: cover;
    }
    figure.landing_img figcaption {
        bottom: 0;
        display: block;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
    }
    figure.landing_img h2 {
        font-weight: 400;
        left: 0;
        right: 0;
        font-size: 25px;
        letter-spacing: -1px;
        margin: 0 auto;
        position: absolute;
        bottom: 50%;
        -webkit-transform: translateY(50%);
        transform: translateY(50%);
        color: #ffffff;
        text-shadow: 1px 0px 0px #000000;
    }
    figure.landing_img h2 span {
        font-weight: 800;
    }
    figure.landing_img p {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        margin: 0 auto;
        top: 50%;
        opacity: 0;
        -webkit-transform: translateY(-20%) scale(0.7);
        transform: translateY(-20%) scale(0.7);
    }
    figure.landing_img .square:hover {
        height: 150px;
        width: 150px;
        overflow: hidden;
        position: absolute;
        top: 50%;
        left: 50%;
        content: '';
        -webkit-transform: rotate(45deg) translate(-50%, -50%);
        transform: rotate(45deg) translate(-50%, -50%);
        -webkit-transform-origin: 0 0;
        transform-origin: 0 0;
    }
    figure.landing_img .square:before,
    figure.landing_img .square:after,
    figure.landing_img .square div:before,
    figure.landing_img .square div:after {
        background-color: rgb(255, 255, 255);
        position: absolute;
        content: "";
        display: block;
        -webkit-transition: all 0.4s ease-in-out;
        transition: all 0.4s ease-in-out;
    }
    figure.landing_img .square:before,
    figure.landing_img .square:after {
        width: 65%;
        height: 2px;
    }
    figure.landing_img .square div:before,
    figure.landing_img .square div:after {
        width: 2px;
        height: 65%;
    }
    figure.landing_img .square:before,
    figure.landing_img .square div:before {
        left: 0;
        top: 0;
    }
    figure.landing_img .square:after,
    figure.landing_img .square div:after {
        bottom: 0;
        right: 0;
    }
    figure.landing_img a {
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        position: absolute;
    }
    figure.landing_img:hover img,
    figure.landing_img.hover img {
        background-color: transparent;
        opacity: 0.25;
        -webkit-transform: scale(1.1);
        transform: scale(1.1);
    }
    figure.landing_img:hover h2,
    figure.landing_img.hover h2 {
        opacity: 1;
        -webkit-transform: translateY(0px);
        transform: translateY(0px);
    }
    figure.landing_img:hover p,
    figure.landing_img.hover p {
        opacity: 1;
        -webkit-transform: translateY(0px) scale(1);
        transform: translateY(0px) scale(1);
    }
    figure.landing_img:hover .square:before,
    figure.landing_img.hover .square:before {
        width: 38%;
    }
    figure.landing_img:hover .square div:before,
    figure.landing_img.hover .square div:before {
        height: 38%;
    }
    figure.landing_img:hover .square:after,
    figure.landing_img.hover .square:after {
        width: 55%;
    }
    figure.landing_img:hover .square div:after,
    figure.landing_img.hover .square div:after {
        height: 55%;
    }

    svg {
        font-family: 'Russo One', sans-serif;
        width: 100%; height: 100%;
    }
    svg text {
        text-transform: uppercase;
        animation: stroke 5s infinite alternate;
        stroke-width: 2;
        stroke: #9688FE;
        font-size: 140px;
    }
    @keyframes stroke {
        0%   {
            fill: rgba(72,138,20,0); stroke: #9688FE;
            stroke-dashoffset: 25%; stroke-dasharray: 0 50%; stroke-width: 2;
        }
        70%  {fill: rgba(72,138,20,0); stroke: #9688FE; }
        80%  {fill: rgba(72,138,20,0); stroke: #9688FE; stroke-width: 3; }
        100% {
            fill: #9688FE; stroke: rgba(54,95,160,0);
            stroke-dashoffset: -25%; stroke-dasharray: 50% 0; stroke-width: 0;
        }
    }
    #sticky_purchase {
        position: fixed;
        width: 100%;
        display: flex;
        transition: top 0.3s;
        justify-content: center;
        background: transparent;
    }


    #qr-canvas {
    margin: auto;
    width: calc(100% - 20px);
    max-width: 400px;
    }

    #btn-scan-qr {
    cursor: pointer;
    }

    #btn-scan-qr img {
    height: 10em;
    padding: 15px;
    margin: 15px;
    background: white;
    }

    #qr-result {
    font-size: 1.2em;
    margin: 20px auto;
    padding: 20px;
    max-width: 700px;
    background-color: white;
    }
    .emercado_menu_sub_pic {
        object-fit: contain;
        min-height: auto;
        min-height: 100px;
    }

    .carousel-inner {
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    .back-to-top{
        bottom: 70px;
    }
    .input-group>:not(:first-child):not(.dropdown-menu):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback) {
    margin-left: 15px;
    font-size: 16px;
    font-weight: 500;
}

    @media only screen and (max-width: 991px) and (min-width: 240px){
        .col-12.col-sm-12.col-md-4.col-lg-3.col-xl-3.p-0.txt h5{
            display: none !important;
        }
        .tab-content img {
            height: 220px !important;
            width: 100% !important;
            object-fit: contain;
        }
    }
    @media (max-width: 350px){
        .srch_location{
            width: 100% !important;
            justify-content: center !important;
            margin-top: 1rem !important;
        }
        .sm_black{
            color: black !important;
            text-shadow: none !important;
        }
    }

    @media (max-width: 280px){
        .carousel-control .icon-prev, .carousel-control .icon-next, .carousel-control .glyphicon-chevron-left, .carousel-control .glyphicon-chevron-right {
            top: 35% !important;
        }
    }
    @media screen and (min-width: 768px){
        .carousel-control .glyphicon-chevron-left, .carousel-control .icon-prev {
        margin-left: 0px;
      }
        .carousel-control .glyphicon-chevron-right, .carousel-control .icon-next {
        margin-right: 0px;
      }
    }

    @-webkit-keyframes rotateIt3 {
        0 {
            -webkit-transform: rotate(0);
            transform: rotate(0)
        }

        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg)
        }
    }

    @keyframes rotateIt3 {
        0 {
            -webkit-transform: rotate(0);
            transform: rotate(0)
        }

        100% {
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg)
        }
    }

    #home-pic-2,#home-pic-3,#home-pic-4,#home-pic-5,#home-pic-6 {
        -webkit-transform-origin: 50% 50%;
        transform-origin: 50% 50%;
        -webkit-animation: rotateIt3;
        animation: rotateIt3;
        -webkit-animation-duration: 90s;
        animation-duration: 90s;
        -webkit-animation-timing-function: linear;
        animation-timing-function: linear;
        -webkit-animation-iteration-count: infinite;
        animation-iteration-count: infinite
    }
    #home-page-pictures {
        position: relative
    }

    #home-page-pictures h2 {
        font-size: 414rem;
        line-height: .8;
        color: #ebdfd4;
        position: relative;
        z-index: 2;
        margin-bottom: 49vw
    }

    #home-page-pictures #home-pic-2 {
        position: absolute;
        top: -10vw;
        right: 40vw;
    }

    #home-page-pictures #home-pic-2 img {
        width: calc(100vw * 240/1906);
        height: auto
    }

    #home-page-pictures #home-pic-3 {
        position: absolute;
        top: -6vw;
        left: 8vw;
    }

    #home-page-pictures #home-pic-3 img {
        width: calc(100vw * 240/1906);
        height: auto;
    }

    #home-page-pictures #home-pic-4 {
        position: absolute;
        top: 0vw;
        left: 0;
    }

    #home-page-pictures #home-pic-4 img {
        width: calc(100vw * 240/1906);
        height: auto
    }

    #home-page-pictures #home-pic-5 {
        position: absolute;
        top: -5vw;
        right: 10vw;
    }

    #home-page-pictures #home-pic-5 img {
        width: calc(100vw * 240/1906);
        height: auto
    }

    #home-page-pictures #home-pic-6 {
        position: absolute;
        right: 0;
        top: 0;
    }

    #home-page-pictures #home-pic-6 img {
        width: calc(100vw * 240/1906);
        height: auto
    }
    .did-floating-label-content{
        position: relative;
        border-radius: 4px;
    }
    .did-floating-input:focus, .did-floating-select:focus {
        outline: none;
        border: 1px solid #9688FE !important;
    }
    .did-floating-input, .did-floating-select{
        font-size: 12px;
        display: block;
        width: 100%;
        height: 36px;
        padding: 0 20px;
        background: #fff;
        color: #323840;
        border: 1px solid #ccc;
        box-sizing: border-box;
        height: 50px !important;
        border-radius: 5px;
        font-size: 14px;
    }
    .did-floating-input:focus ~ .did-floating-label, .did-floating-select:focus ~ .did-floating-label {
        top: -8px;
        font-size: 13px;
    }
    .did-floating-label{
        color: #777;
        font-size: 20px;
        font-weight: normal;
        position: absolute;
        pointer-events: none;
        left: 15px;
        top: 17px;
        padding: 0 5px;
        background: #fff;
        transition: 0.2s ease all;
        -moz-transition: 0.2s ease all;
        -webkit-transition: 0.2s ease all;
        font-size: 14px;
    }
    .pac-container {
        z-index: 9999;
        }
    .modal-content {
        background-color: #fff;
        color: #000;
        z-index: 9999;
        margin-top: 79px;
    }     
                 
  </style>
<body>
    <div class="loading-spinner" id="loading-spinner" style="visibility: visible;display: block;">
        <img src="{% static 'img/consumer/cart_logo.png' %}" alt="" style="width: 85px !important; left: 50% !important; top: 50% !important; position: inherit; height: 110px !important;">
    </div>
    <header class="header" style="z-index: 3;">
        <div class="logo">
            <a style="text-decoration: underline;" href="/">
                <img class="header_logo d-sm-none d-md-none d-lg-none mt-1" style="width: auto; max-height: 50px;" src="{% static 'img/consumer/border_white.png' %}" alt="">
                <img class="header_logo d-none d-sm-block" src="{% static 'img/consumer/black&white.png' %}" alt="">
            </a>
        </div>
         <div class="dropdown text-nowrap d-flex">
           {% if consumer %}
          <div class="dropdown m-auto pt-3">
              <div class=" nav-link m-auto header_icon text-center"  data-bs-toggle="dropdown">
                  <i class="dropbtn_cart fa-solid fa-shopping-cart text-white p-0"  style="font-size:2rem; margin-right: 0 10px; cursor: pointer;"></i>
                  <span class="badge_cart" id="cart_total_count">
              </div>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow_cart " style="width: 300px;">
                <div class="pt-3 pb-2 px-3 border-bottom">
                    <h4 class="emercado_color_1 m-0">Cart</h4>
                </div>
                {% if my_cart|length > 0 %}
                    
                    {% if my_cart|length <= 6 %}
                    <div class="" id="scroll_style">
                    {% else %}
                    <div class="header__cart-list-item scrollbar" id="scroll_style">
                    {% endif %}
                    
                    {% for cart in my_cart %}
                        <a class="header__cart-item cart_block" href="/view_cart#cart_section{{cart.id}}">
                            {% if cart.product_image %}
                            <img  src="/Post_Media/{{cart.product_image}}" alt="" class="header__cart-img"/>
                            {% else  %}
                            <img  src="/static/img/consumer/sampgyupsal.png" alt="" class="header__cart-img"/>
                            {% endif  %}
                            <div class="header__cart-item-info text-black">
                                <div class="header__cart-item-head">
                                    <h5 class="header__cart-item-name">{{cart.product_name}}</h5>
                                    <div class="header__cart-item-price-wrap">
                                        <span class="header__cart-item-price"><script>document.write(CurrencyConverter({{cart.total}}))</script></span>
                                        <span class="header__cart-item-multiply">x</span>
                                        <span class="header__cart-item-qnt">{{cart.quantity}}</span>
                                    </div>
                                </div>
                                <div class="header__cart-item-body">
                                    <span class="header__cart-item-description"></span>
                                    <span class="header__cart-item-remove"></span>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-divider m-0"></div>
                    {% endfor %}
                    </div>
                    <div class="">
                        <a href="/view_cart" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">View All</a>
                        <a href="/checkout_all" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">Checkout</a>
                    </div>

                 
                {% else %}
                <div class="text-center" id="scroll_style">
                    <img src="{% static 'img/consumer/header/empty_cart.jpg' %}" style="min-width: 150px; height: calc(100vw * 250/1906); width: calc(100vw * 250/1906); min-height: 180px !important;" alt="sample75"/>
                    <p>No items yet</p>
                    <div class="dropdown-divider m-0 pb-3"></div>
                </div>
                <div class="" style="display:none;" id="cart_footer">
                    <a href="/view_cart" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">View All</a>
                    <a href="/checkout_all" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">Checkout</a>
                </div>
                {% endif %}
  
  
              </div>
          </div>
          <div class="dropdown m-auto pt-3">
              <div class="nav-link dropdown m-auto header_icon text-center"   data-bs-toggle="dropdown" id="notif_dropdown">
                  <i class="dropbtn_bell fa-solid fa-bell text-white p-0" style="font-size:2rem; margin: 0 10px; cursor: pointer;"></i><span class="badge_bell " id="notif_count"></span>
              </div>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow_notif" style="width:300px">
                <div class="pt-3 pb-2 px-3 border-bottom">
                <h4 class="emercado_color_1 m-0 text_size_sm">Notifications</h4>
                </div>
                {% if notifications|length > 0 %}
                    {% if notifications|length <= 5 %}
                    <div class="" id="scroll_style">
                    {% else %}
                    <div class="header__cart-list-item scrollbar"id="scroll_style">
                    {% endif %}
                    <!-- notification if naay magpa request og order (parent order)-->
                    {% for notif in notifications %}
        
                        {% if notif.notif_type == "Share Order" %}
                            {% if not notif.requested_response  %}
                                <a class="header__cart-item notif_block notif_unread" onclick="allow_share_order('{{csrf_token}}','{{notif.id}}')">
                            {% else %}
                                <a class="header__cart-item notif_block notif_read" id="test-1">
                            {% endif %}
                                <div class="header__cart-item-info text-black">
                                    <div class="header__cart-item-head header__cart-item-head_notif">
                                        <img src="Post_Media/{{notif.image}}" alt="" class="header__cart-img img-fluid rounded-circle" style="width: 30px; height: 30px; margin-top: 3px;"/>
                                        <div class="d-block mt-2">
                                            <h5 class="header__cart-item-name">{{notif.requesting_name}}</h5>
                                            <p class="emercado_color_1 p-0 m-0 btn_notif">{{notif.requesting_id_format}}</p>
                                        </div>
        
                                    </div>
                                    <div class="header__cart-item-body">
                                        <span class="header__cart-item-description"  style="white-space: normal;margin-left: 50px;">
                                            <p class="my-2 btn_notif">{{notif.content}}</p>
                                        </span>
                                    </div>
        
                                    <!-- <div class="text-center mb-2" id="shared_optons{{notif.id}}">
                                        <span class="header__cart-item-remove">
                                            <button type="button" class="btn btn-sm text-white" style="background-color: #656363; margin-right: 10px;" onclick="denied_request('{{csrf_token}}','{{notif.id}}')">No</button>
                                            <button type="button" class="btn btn-sm text-white" style="background-color: #ff6c20; margin-left: 10px;" onclick="accept_request('{{csrf_token}}','{{notif.id}}')">Yes</button>
                                        </span>
                                    </div> -->
        
                                </div>
                            </a>
                        <!-- end of notification if naay magpa request og order (parent order)-->
                            <div class="dropdown-divider m-0"></div>
                            {% elif notif.notif_type == "Share Order Response" %}
                                {% if notif.requested_response == "Yes" %}
                                    <a class="header__cart-item notif_block notif_unread" onclick="share_order_accessable('{{notif.url}}')">
                                {% else %}
                                    <a class="header__cart-item notif_block notif_read" onclick="share_order_access_denied()">
                                {% endif %}
                                    <div class="header__cart-item-info text-black">
                                        <div class="header__cart-item-head header__cart-item-head_notif">
                                            <img src="Post_Media/{{notif.image}}" alt="" class="header__cart-img img-fluid rounded-circle" style="width: 30px; height: 30px;"/>
                                            <div class="d-block mt-2">
                                                    <h5 class="header__cart-item-name">{{notif.account_responded_name}}</h5>
                                                    <p class="emercado_color_1 p-0 m-0 btn_notif">{{notif.account_responded_id_format}}</p>
                                            </div>
                                        </div>
                                        <div class="header__cart-item-body">
                                            <span class="header__cart-item-description" style="white-space: normal;margin-left: 50px;">
                                                <p class="my-2 btn_notif"> {{notif.content}}</p>
                                            </span>
                                        </div>
        
                                    </div>
                                    </a>
                                    <!-- end of notification if naay magpa request og order (parent order)-->
                                    <div class="dropdown-divider m-0"></div>
                            {% elif notif.notif_type == "Personnel Discount Request" %}
                                <a href="{{notif.url}}" class="header__cart-item notif_block notif_read" onclick="share_order_access_denied()">
                                    <div class="header__cart-item-info text-black">
                                        <div class="header__cart-item-head header__cart-item-head_notif">
                                            <img src="Post_Media/{{notif.image}}" alt="" class="header__cart-img img-fluid rounded-circle" style="width: 30px; height: 30px;"/>
                                            <div class="d-block mt-2">
                                                    <h5 class="header__cart-item-name">{{notif.account_responded_name}}</h5>
                                                    <p class="emercado_color_1 p-0 m-0 btn_notif">{{notif.account_responded_id_format}}</p>
                                            </div>
                                        </div>
                                        <div class="header__cart-item-body">
                                            <span class="header__cart-item-description" style="white-space: normal;margin-left: 50px;">
                                                <p class="my-2 btn_notif"> {{notif.content}}</p>
                                            </span>
                                        </div>
        
                                    </div>
                                    </a>
                                    <!-- end of notification if naay magpa request og order (parent order)-->
                                <div class="dropdown-divider m-0"></div>
                            {% endif %}
                    {% endfor %}
                    </div>
                    
                <a href="/notifications" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">View All</a>
                {% else %}
                <div class="text-center">
                    <img src="{% static 'img/consumer/header/empty_notification.png' %}" style="padding: 25px !important; min-width: 180px !important; height: calc(100vw * 250/1906); width: calc(100vw * 250/1906); min-height: 180px !important;" alt="sample75"/>
                    <p>No notifications yet</p>
                </div>
                {% endif %}
    
            </div>
    
    
          </div>
          <div class="dropdown">
          <a class="nav-link nav-profile align-items-center px-2" href="#" data-bs-toggle="dropdown">
              {% if consumer.profile_picture %}
                  {% if 'profile_default.jpg' in consumer.profile_picture %}
                      <img class="img-fluid rounded-circle" src="{% static 'img/consumer/profile/profile_default.jpg' %}" style="width: 35px; height: 35px;  border: 3px solid white;">
                  {% else %}
                      <img class="img-fluid rounded-circle" src="/Post_Media/{{consumer.profile_picture}}" style="width: 35px; height: 35px;  border: 3px solid white;">
                  {% endif %}
              {% else %}
                  <img class="img-fluid rounded-circle" src="{% static 'img/consumer/profile/profile_default.jpg' %}" style="width: 35px; height: 35px;  border: 3px solid white;">
              {% endif %}
              <span class="name d-none d-lg-inline text-white">{{consumer.first_name}} {{consumer.last_name}}</span>
          </a><!-- End Profile Iamge Icon -->
              <nav class="dropdown-menu dropdown-menu-end dropdown-menu-arrow_profile" style="width:173px !important;">
                  <a class="dropdown-content-profile d-flex align-items-center" href="{% url 'user_profile' %}">
                      <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400" style="padding-right: 23px; font-size: 18px;" ></i>
                      <span>My Profile</span>
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-content-profile d-flex align-items-center" href="#" data-toggle="modal" data-target="#logoutModal">
                      <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400" style="padding-right: 23px; font-size: 18px;"></i><span>Logout</span>
                  </a>
              </nav>
          </div>
    
          {% else %}
          <div class="m-auto header_icon text-center">
              <div class="dropdown m-auto">
                  <div class=" nav-link m-auto header_icon text-center"  data-bs-toggle="dropdown">
                      <i class="dropbtn_cart fa-solid fa-shopping-cart text-white p-0"  style="font-size:2rem; margin-right: 15px; cursor: pointer;"></i>
                      <p class="badge_cart_not_login" id="cart_total_count">12</p>
                  </div>
                  <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow_cart" style="width: 300px;">
                      <div class="pt-3 pb-2 px-3 border-bottom">
                          <h4 class="emercado_color_1 m-0 text_size_sm">Cart</h4>
                      </div>
                      {% if my_cart|length > 0 %}
                      <div class="header__cart-list-item" id="scroll_style">
                          {% for cart in my_cart %}
                          <a class="header__cart-item cart_block" href="/view_cart#cart_section{{cart.id}}">
                              {% if cart.product_image %}
                              <img  src="/Post_Media/{{cart.product_image}}" alt="" class="header__cart-img"/>
                              {% else  %}
                                  <img  src="/static/img/consumer/sampgyupsal.png" alt="" class="header__cart-img"/>
                              {% endif  %}
                              <div class="header__cart-item-info text-black">
                                  <div class="header__cart-item-head">
                                      <h5 class="header__cart-item-name">{{cart.product_name}}</h5>
                                      <div class="header__cart-item-price-wrap">
                                          <span class="header__cart-item-price"><script>document.write(CurrencyConverter({{cart.total}}))</script></span>
                                          <span class="header__cart-item-multiply">x</span>
                                          <span class="header__cart-item-qnt">{{cart.quantity}}</span>
                                      </div>
                                  </div>
                                  <div class="header__cart-item-body">
                                      <span class="header__cart-item-description"></span>
                                      <span class="header__cart-item-remove"></span>
                                  </div>
                              </div>
                          </a>
                          {% endfor %}
    
                          <div class="dropdown-divider m-0 pb-3"></div>
                          <div class="">
                            <a href="/view_cart" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">View All</a>
                            <a href="/checkout_all" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">Checkout</a>
                          </div>
                      </div>
                      {% else %}
                        <div class="text-center">
                            <img src="{% static 'img/consumer/header/empty_cart.jpg' %}" style="min-width: 150px; height: calc(100vw * 250/1906); width: calc(100vw * 250/1906); min-height: 180px !important;" alt="sample75"/>
                            <p>No items yet</p>
                            <div class="dropdown-divider m-0 pb-3"></div>
                        </div>
                        <div class="" style="display:none;" id="cart_footer">
                            <a href="/view_cart" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">View All</a>
                            <a href="/checkout_all" class="header__cart-view-cart btn btn--primary mb-4 text-white" style="font-size: 9px !important;">Checkout</a>
                        </div>
                      {% endif %}
    
                  </div>
              </div>
          </div>
          <a class="nav-link nav-profile align-items-center px-2 " href="/login" >
              <span class="name  text-white">Login</span>
          </a>
          {% endif %}
          <script>
              $(document).ready(function () {
                get_cart_total("{{csrf_token}}")
              });
          </script>
         </div>
         <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="false" style="background-color:rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                        <a class="btn btn-orange" href="{% url 'logout' %}">Logout</a>
                    </div>
                </div>
            </div>
         </div>
        <!-- End -->
    </header>
     <main id="main" style=" padding-top: 60px !important; ">
        <!-- ======= Hero Section ======= -->
        <section class="section dashboard emercado_background_color_3 p-0">

            <section class="emercado_background">
                <section class="emercado_background_image_1 d-grid" style="z-index:2">
                    <div id="home-page-pictures">
                        <h2 class="m-0 text-center" style="font-size: calc(6px + 75vw * 100/1906); text-shadow: 2px 0px 0 #000; color: #ffffff; font-family: 'Open Sans';">Indulge your cravings</h2>
                        <div class="d-none d-lg-block" id="home-pic-2">
                            <img src="https://adachirestaurant.com/wp-content/uploads/2020/11/home-pic-1.png" alt="">
                        </div>
                        <div class="d-none d-lg-block" id="home-pic-3">
                            <img src="https://adachirestaurant.com/wp-content/uploads/2020/11/home-pic-2.png" alt="">
                        </div>
                        <div class="d-none d-lg-block" id="home-pic-4">
                            <img src="https://adachirestaurant.com/wp-content/uploads/2020/11/home-pic-3.png" alt="">
                        </div>
                        <div class="d-none d-lg-block" id="home-pic-5">
                            <img src="https://adachirestaurant.com/wp-content/uploads/2020/11/home-pic-5.png" alt="">
                        </div>
                        <div class="d-none d-lg-block" id="home-pic-6">
                            <img src="https://adachirestaurant.com/wp-content/uploads/2020/11/home-pic-4.png" alt="">
                        </div>
                    </div>
                </section>
                <div class="container-lg px-0">
                    <section class="my-4 p-0 shadow">
                        <div class="row w-100 m-auto">
                            <div class="col-12 col-sm-8 col-md-8 col-lg-8 p-0">
                                <div id="myCarousel" class="carousel slide" data-ride="carousel" style=" height: 150px !important; ">
                                    <!-- Indicators -->
                                    <ol class="carousel-indicators">
                                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                        <li data-target="#myCarousel" data-slide-to="1"></li>
                                        <li data-target="#myCarousel" data-slide-to="2"></li>
                                        <li data-target="#myCarousel" data-slide-to="3"></li>
                                    </ol>
                                    <!-- Wrapper for slides -->
                                    <div class="carousel-inner h-100">
                                        <div class="item active">
                                            <img src="{% static 'img/consumer/vouchers/test_voucher.png' %}" class="h-100" style="height: 150px !important; object-fit: fill;" alt="sample75"/>
                                        </div>
                                        <div class="item">
                                            <img src="{% static 'img/consumer/vouchers/test_voucher_1.png' %}" class="h-100" style="height: 150px !important; object-fit: fill;" alt="sample75"/>
                                        </div>
                                        <div class="item">
                                            <img src="{% static 'img/consumer/vouchers/test_voucher_2.png' %}" class="h-100" style="height: 150px !important; object-fit: fill;" alt="sample75"/>
                                        </div>
                                        <div class="item">
                                            <img src="{% static 'img/consumer/vouchers/test_voucher_3.png' %}" class="h-100" style="height: 150px !important; object-fit: fill;" alt="sample75"/>
                                        </div>
                                    </div>
                                    <!-- Left and right controls -->
                                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                            </div>
                            <div class="d-none d-sm-block d-md-block d-lg-block col-sm-4 col-md-4 col-lg-4 p-0">
                                <div class="d-flex" style="flex-direction: column-reverse;">
                                    <div class="item">
                                        <div class="photo h-100">
                                            <figure class="landing_img m-auto h-100">
                                                <img src="{% static 'img/consumer/store/store_background.jpg' %}" class="h-100" alt="sample75"/>
                                                <figcaption>
                                                    <div class="square">
                                                        <div></div>
                                                    </div>
                                                    <H2 class="">Shop</H2>
                                                    <p class="text-white">till you drop</p>
                                                </figcaption>
                                                <a href="{% url 'index' %}"></a>
                                            </figure>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="photo h-100">
                                            <figure class="landing_img m-auto h-100">
                                                <img src="{% static 'img/consumer/landing_page/merchant_bg_2.jpg' %}" class="h-100" alt="sample75"/>
                                                <figcaption>
                                                    <div class="square">
                                                        <div></div>
                                                    </div>
                                                    <H2 class="">Merchant</H2>
                                                    <p class="text-white">Be a Checkout Store</p>
                                                </figcaption>
                                                <a href="/merchant/register"></a>
                                            </figure>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- <section class="container-fluid eCheckout_background_color_2 mb-4 p-4 shadow">

                        <div class="row w-100 m-auto">
                            <div class="align-self-center col-12 col-lg-6 p-0">
                                <h4 style="font-size: calc(14px + 100vw * 5/1906);">Where are you now?</h4>
                            </div>
                            <div class="col-12 col-lg-6">

                                <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" data-backdrop="false" aria-hidden="true" style="background-color:rgba(0,0,0,0.5);">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title" id="exampleModalLabel">Location</h4>
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span style="font-size: 20px;" aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form">
                                                    <input id="query" type="text" placeholder="Enter a town, city or postcode" />
                                                    <button id="search"></button>
                                                </div>
                                                <div class="result">
                                                    <div class="label" id="searchFor">Please enter a keyword in the search box above</div>
                                                </div>
                                                <div id="map" class="map"></div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </section> -->
                    <section class="emercado_background_image_2 d-grid mb-4 shadow h-100">

                        <div class="row w-100 m-auto">
                            <div class="col-12 col-sm-12 col-md-12 col-lg-12 mt-2 p-2 ">
                                <div class="did-floating-label-content d-flex shadow">
                                    <input class="did-floating-input" type="text">
                                    <label class="did-floating-label mx-2">Enter your location</label>
                                    <p id="coordinates" style="display:none"></p>
                                    <form id="location-form" action="{% url 'dine' %}" method="POST">
                                        {% csrf_token %}
                                        <input type="hidden" name="lat" id="lat-input">
                                        <input type="hidden" name="lng" id="lng-input">
                                        <button type="button" class="header__search-btn emercado_background_color_1 emercado_search_btn" id="search-location-btn-1" onclick="shareLocation(); hideForm(this)"><i class="header__search-btn-icon fas fa-search text-white"></i></button>
                                    </form>
                                    <button type="button" class="header__search-btn emercado_background_color_1 emercado_search_btn" id="search-location-btn-2" data-toggle="modal" data-target="#myModal"><i class="header__search-btn-icon fas fa-search text-white"></i></button>
                                    <script>
                                      function hideForm(btn) {
                                        document.getElementById("search-location-btn-1").style.display = "none";
                                        document.getElementById("search-location-btn-2").style.display = "none";
                                        btn.removeAttribute("onclick");
                                      }
                                    </script>
                                    <!-- The Modal -->
                                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="false" data-backdrop="static" style="background-color:rgba(0,0,0,0.5);">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLabel">Search Store Address</h5>
                                                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">×</span>
                                                    </button>
                                                </div>                     
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-12 col-sm-6 col-md-4 col-lg-4 mb-3">
                                                            <h4 class="emercado_color_1 m-0 mb-4 d-block">Search Address</h4>
                                                        </div>
                                                        <div class="col-12 col-sm-6 col-md-8 col-lg-8 mb-3">
                                                            <form id="new-loc" method="POST" action="{% url 'dine' %}">
                                                                {% csrf_token %}
                                                                <div class="did-floating-label-content d-flex shadow">
                                                                    <input class="did-floating-input" type="text" id="address-input" name="address" value="{{address}}">
                                                                    <label for="address-input" class="did-floating-label mx-2">Address</label>
                                                                    <button type="submit" class="header__search-btn emercado_background_color_1 emercado_search_btn"><i class="header__search-btn-icon fas fa-search text-white"></i></button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>                                              
                                                    <div class="row">
                                                        <div class="col-md-8">
                                                            <div id="map" style="width:100%; height:400px;"></div>
                                                        </div>                                                                                                               
                                                        <div class="col-md-4">
                                                            <h3 style="font-family: 'Montserrat', sans-serif;{% if address %} display: none; {% endif %}">Stores in near you</h3>
                                                            <ul class="store-list" style="max-height: 347px; overflow-y: auto; {% if address %} display: none; {% endif %}">
                                                              {% for store in nearest_store %}
                                                              <li data-store-name="{{ store.store_name }}" data-store-id="{{ store.store_id }}" data-type="store" style="font-size: 16px;margin-bottom: 10px;background-color: #f7f7f7;border: 1px solid #ccc;border-radius: 5px;padding: 10px;display: flex;align-items: center;font-family: 'Montserrat', sans-serif;">
                                                                {% if store.profile_pic %}
                                                                    {% if 'cart_logo.png' in store.profile_pic %}
                                                                        <img src="{% static 'img/consumer/profile/cart_logo.png' %}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                    {% else %}
                                                                        <img src="/Post_Media/{{store.profile_pic}}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                    {% endif %}
                                                                {% else %}
                                                                    <img src="{% static 'img/consumer/profile/cart_logo.png' %}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                {% endif %}
                                                                <div>
                                                                  <a href="/store/{{store.store_id}}" style="color: #2c3e50; font-weight: bold;">{{store.store_name}}</a>
                                                                  <br>
                                                                  <span style="color: #999;">{{ store.distance_from_user|floatformat:2 }} km</span>
                                                                  <span style="color: #999;">{{ store.store_address2 }}</span>
                                                                </div>
                                                              </li>
                                                              {% endfor %}
                                                            </ul>
                                                            {% if address %}
                                                            <h3 style="font-family: 'Montserrat', sans-serif;">Stores in {{ address }}</h3>
                                                            <ul class="store-list" style="max-height: 347px; overflow-y: auto;">
                                                                {% if searchstore %}
                                                                    {% for store in searchstore %}
                                                                    <li data-store-name="{{ store.store_name }}" data-store-id="{{ store.store_id }}" data-type="store" style="font-size: 16px;margin-bottom: 10px;background-color: #f7f7f7;border: 1px solid #ccc;border-radius: 5px;padding: 10px;display: flex;align-items: center;font-family: 'Montserrat', sans-serif;">
                                                                    {% if store.profile_pic %}
                                                                        {% if 'cart_logo.png' in store.profile_pic %}
                                                                            <img src="{% static 'img/consumer/profile/cart_logo.png' %}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                        {% else %}
                                                                            <img src="/Post_Media/{{store.profile_pic}}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                        {% endif %}
                                                                    {% else %}
                                                                        <img src="{% static 'img/consumer/profile/cart_logo.png' %}" class="store-img" alt="{{store.store_name}} Image" style="margin-right: 10px;">
                                                                    {% endif %}
                                                                    <div>
                                                                        <a href="/store/{{store.store_id}}" style="color: #2c3e50; font-weight: bold;">{{store.store_name}}</a>
                                                                        <br>
                                                                        <span style="color: #999;">{{ store.distance_from_user|floatformat:2 }} km</span>
                                                                        <span style="color: #999;">{{ store.store_address2 }}</span>
                                                                    </div>
                                                                    </li>
                                                                    {% endfor %}  
                                                                {% endif %}  
                                                            </ul>
                                                            {% endif %}                                                                        
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="close-modal-btn" style="background-color: #2c3e50;">Close</button>
                                                </div>                                             
                                            </div>
                                        </div>
                                    </div>  
                                    <script>
                                        if ("{{address}}") {
                                          $('#myModal').modal('show');
                                        }
                                    </script>   
                                </div>
                            </div>         
                        </div>
                    </section>
                    <section class="container-fluid emercado_background_color_2 mb-5 shadow">
                        <div id="category_carousel" class="carousel slide" data-ride="carousel">
                            <!-- Indicators -->
                            <ol class="carousel-indicators">
                                <li data-target="#category_carousel" data-slide-to="0" class="active"></li>
                                <li data-target="#category_carousel" data-slide-to="1"></li>
                            </ol>
                            <!-- Wrapper for slides -->
                            <div class="carousel-inner h-100">
                                <div class="item active">
                                    <div class="row w-100 m-auto">
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/bread.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Bread</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/lettuce.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Vegan Dishes</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/shirmp.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Sea Food</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/cake.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Desserts</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/fresh-juice.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Fresh Juices</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/coffee.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Beverages</p>
                                        </div>
                                    </div>
                                    
                                </div>
                                <div class="item">
                                    <div class="row w-100 m-auto">
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/hamburger.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Delicacy</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/coffee-cup.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Cafe</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/salads.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Salad</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/salad.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Sides</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/mignardise.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Mignardise</p>
                                        </div>
                                        <div class="col-2 text-center">
                                            <img src="{% static 'img/consumer/categories/nachos.png' %}" style="margin-top: 7px; height: 50px !important; width: 50px !important; border-radius: 50%; object-fit: contain;" src="#" alt="...">
                                            <p class="text-black emercado_name_category text-center">Appetizers</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Left and right controls -->
                            <a class="left carousel-control" href="#category_carousel" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="right carousel-control" href="#category_carousel" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </section>

                   

                    <section class="container-fluid emercado_background_color_2 mb-4 p-4 menus shadow">
                        <div class="row w-100 m-auto">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6 mb-3 px-2">
                                <h3 class="emercado_color_1 m-0 mb-4 d-block">STORES</h3>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6 mb-3 px-2">
                                <div class="did-floating-label-content d-flex shadow">
                                    <input class="did-floating-input" type="text">
                                    <label class="did-floating-label mx-2">Search Store</label>
                                    <button type="submit" class="header__search-btn emercado_background_color_1 emercado_search_btn"><i class="header__search-btn-icon fas fa-search text-white"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="box-container my-3">
                            <div class="row w-100 m-auto">
                                {% for store in stores %}
                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 px-2">
                                    <a href="/store/{{store.store_id}}">
                                        <div class="box emercado_item_box border" data-aos="fade-up">
                                            <div class="image emercado_background_color_whitesmoke">
                                                {% if store.profile_pic %}
                                                    {% if 'cart_logo.png' in store.profile_pic %}
                                                        <img src="{% static 'img/consumer/profile/cart_logo.png' %}" alt="">
                                                    {% else %}
                                                        <img src="/Post_Media/{{store.profile_pic}}" alt="">
                                                    {% endif %}
                                                {% else %}
                                                    <img src="{% static 'img/consumer/profile/cart_logo.png' %}" alt="">
                                                {% endif %}
                                                <h3 class="emercado_marker_address p-2 emercado_text_overflow">
                                                    <i class="fa fa-map-marker"></i><span style="margin-left: 10px;">{{store.store_address2}}</span>
                                                </h3>
                                            </div>
                                            <div class="content">
                                                <h4 class="mt-0 emercado_color_1 text-black emercado_text_overflow p-1">{{store.store_name}}</h4>
                                                <p class="m-0 text-center text-black p-0">{{store.store_category}}</p>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div id="products"></div>
                    </section>

                    <section class="container-fluid emercado_background_color_2 mb-4 p-4 menus shadow">
                        <div class="row w-100 m-auto">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6 mb-3 px-2">
                                <h3 class="emercado_color_1 m-0 mb-4 d-block">Menu</h3>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-6 mb-3 px-2">
                                <div class="did-floating-label-content d-flex shadow">
                                    <input class="did-floating-input" type="text">
                                    <label class="did-floating-label mx-2">Search Product</label>
                                    <button type="submit" class="header__search-btn emercado_background_color_1 emercado_search_btn"><i class="header__search-btn-icon fas fa-search text-white"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="box-container">
                            <div class="row w-100 m-auto">
                                {% for product in products %}
                                    {% if product.status_type == 1 %}
                                        {% if product.stock > 0%}
                                        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 px-2">
                                            <div class="box emercado_item_box border" data-toggle="modal" data-target="#largeModal{{product.product_id}}" style="cursor:pointer">
                                                <div class="image emercado_background_color_whitesmoke">
                                                    <img src="/Post_Media/{{product.default_image}}" alt="">
                                                    <h3 class="emercado_text_overflow"> <i class="fa-solid fa-shopping-cart"></i> {{product.product_name}}</h3>
                                                </div>
                                                <div class="content">
                                                    <h4 class="m-0 emercado_price text-center">₱{{product.original_price}}0</h4>
                                                    <!-- <span class="h6 emercado_sub_price">₱350.99</span> -->
                                                    <p class="m-0 text-center" style="color:green; font-size: 14px;"> {{product.stock}} pieces available</p>
                                                    <div class="row w-100 m-auto">
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 p-0">
                                                            <p class="cub-category" style="font-weight: 500; font-size: 14px;">Filipino Dessert, Rice Dishes, Frozen Yogurt, Quick Bites</p>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                                            <div class="row w-100">
                                                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 mb-2 p-0 text-nowrap">
                                                                    <i class="emercado_color_1 fa-solid fa-clock"></i><span style=" font-size: calc(12px + 100vw * 4/1906) !important; font-weight: 500;" class="px-2">60 mins</span>
                                                                </div>
                                                                <div class="col-6 col-sm-6 col-md-6 col-lg-6 mb-2 p-0 text-nowrap">
                                                                    <i class="emercado_color_1 fa-solid fa-cart-flatbed-suitcase"></i><span style=" font-size: calc(12px + 100vw * 4/1906) !important; font-weight: 500" class="px-2">572 km</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 p-0">
                                                            <div class="d-flex">
                                                                <i class="emercado_color_1 fa-solid fa-truck my-3"></i>
                                                                <p class="px-2 m-0" style="font-weight: 500; font-size: 14px;">Free delivery for the first bulk order which is five and above</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 p-0">
                                                            <div class="d-flex">
                                                                <p class="text-start" style="font-size: 14px; font-weight: 500;">Reviews:</p>
                                                                <div class="star-rating">
                                                                    <input type="radio" id="5-stars" name="rating" value="5" />
                                                                    <label for="5-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="4-stars" name="rating" value="4" />
                                                                    <label for="4-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="3-stars" name="rating" value="3" />
                                                                    <label for="3-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="2-stars" name="rating" value="2" />
                                                                    <label for="2-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="1-star" name="rating" value="1" />
                                                                    <label for="1-star" class="star">&#9733;</label>
                                                                    </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        {% endif %}
                                    {% else %}
                                        {% if product.available_flag == 1 %}
                                        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 px-2">
                                            <div class="box emercado_item_box border" data-toggle="modal" data-target="#largeModal{{product.product_id}}" style="cursor:pointer">
                                                <div class="image emercado_background_color_whitesmoke">
                                                    <img src="/Post_Media/{{product.default_image}}" alt="">
                                                    <h3 class="emercado_text_overflow"> <i class="fa-solid fa-shopping-cart"></i> {{product.product_name}}</h3>
                                                </div>
                                                <div class="content">
                                                    <h4 class="m-0 emercado_price text-center">₱{{product.original_price}}0</h4>
                                                    <!-- <span class="h6 emercado_sub_price">₱350.99</span> -->
                                                    <p class="m-0 text-center text-center" style="color:green; font-size: 14px;">Available</p>
                                                    <div class="row w-100 m-auto">
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                                            <p class="cub-category" style="font-weight: 500; font-size: 14px;">Filipino Dessert, Rice Dishes, Frozen Yogurt, Quick Bites</p>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                                            <div class="row w-100">
                                                                <div class="col-6 col-sm-12 col-md-6 col-lg-6 mb-2 p-0 text_nowrap">
                                                                    <i class="emercado_color_1 fa-solid fa-clock"></i><span style=" font-size: calc(12px + 100vw * 4/1906) !important; font-weight: 500;" class="px-2">60 mins</span>
                                                                </div>
                                                                <div class="col-6 col-sm-12 col-md-6 col-lg-6 mb-2 p-0 text_nowrap">
                                                                    <i class="emercado_color_1 fa-solid fa-cart-flatbed-suitcase"></i><span style=" font-size: calc(12px + 100vw * 4/1906) !important; font-weight: 500;" class="px-2">572 km</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 p-0">
                                                            <div class="d-flex">
                                                                <i class="emercado_color_1 fa-solid fa-truck my-3"></i>
                                                                <p class="px-2 m-0" style="font-weight: 500; font-size: 14px;">Free delivery for the first bulk order which is five and above</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-sm-12 col-md-12 col-lg-12 p-0">
                                                            <div class="d-flex">
                                                                <p class="text-start" style="font-size: 14px; font-weight: 500;">Reviews:</p>
                                                                <div class="star-rating">
                                                                    <input type="radio" id="5-stars" name="rating" value="5" />
                                                                    <label for="5-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="4-stars" name="rating" value="4" />
                                                                    <label for="4-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="3-stars" name="rating" value="3" />
                                                                    <label for="3-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="2-stars" name="rating" value="2" />
                                                                    <label for="2-stars" class="star">&#9733;</label>
                                                                    <input type="radio" id="1-star" name="rating" value="1" />
                                                                    <label for="1-star" class="star">&#9733;</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}
                                <!-- modal -->
                                {% for product in retval %}
                                <div class="modal fade" id="largeModal{{product.product_id}}" tabindex="-1" role="dialog" aria-labelledby="basicModal" data-backdrop="false" aria-hidden="true" style="background-color:rgba(0,0,0,0.5);">
                                    <div style="margin-right: auto; margin-left: auto;" class="modal-dialog modal-dialog-centered modal-full">
                                        <div class="modal-content">
                                        <div class="modal-header">
                                            <div class="row align-items-center">
                                                <div class="col-sm mb-2 mb-sm-0 mx-2">
                                                    <h3 style="color: #9688FE !important;" class="modal-title" id="myModalLabel">Product Information</h3>
                                                </div>
                                            </div>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span style="font-size: 20px;" aria-hidden="true">x</span>
                                            </button>
                                        </div>
                                            <ol class="breadcrumb input-group">
                                                <img src="/Post_Media/{{product.default_image}}"
                                                style="height: 50px !important; width: 50px !important; border-radius: 50%; background:
                                                linear-gradient(180deg, rgba(79, 46, 220, 0.2) 29.17%, rgba(255, 108, 32, 0) 79.17%); object-fit: cover;" src="#" alt="...">
                                                <li class="breadcrumb-item">{{product.store_name}}</li>
                                            </ol>
                                        <div class="modal-body">
                                            <div class="wrapper row w-100 m-auto">
                                                <div class="preview col-sm-12 col-md-4 col-lg-5 mb-3">
                                                    <div class="preview-pic tab-content">
                                                    <div class="tab-pane active mb-3">
                                                        <img id="default_image" src="/Post_Media/{{product.default_image}}" />
                                                    </div>
                                                    </div>
                                                    <div class="emercado_sold_out_container emercado_sides_0" id="sold_out_content" style="display:none;">
                                                        <div class="emercado_sold_out">
                                                            <h4 class="m-0 p-0" style="font-weight: 300;" id="sold_out_msg"></h4>
                                                        </div>
                                                    </div>
                                                    <div class="row w-100 m-auto mb-3">
                                                        <div class="col-12 p-0">
                                                            <div class="carousel slide multi-item-carousel" id="theCarousel">
                                                                <div class="carousel-inner">
                                                                  {% for image in product.images %}
                                                                    <div class="item active">
                                                                      <div class="col-xs-4 emercado_background_color_whitesmoke">
                                                                        <img id="product_.mages{{image.id}}" class="img-responsive" src="/Post_Media/{{image.file_name}}" onclick="display_image('{{image.id}}')" alt="name{{image.id}}" style="max-width: 100px !important; max-height: 50px !important;"/>
                                                                      </div>
                                                                    </div>
                                                                  {% endfor %}
                                                                  <!--  Example item end -->
                                                                </div>
                                                                <a class="left carousel-control" href="#theCarousel" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
                                                                <a class="right carousel-control" href="#theCarousel" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
                                                            </div>
                                                            <!-- <div class="carousel slide multi-item-carousel" id="theCarousel">
                                                                <div class="carousel-inner">
                                                                    <div class="item active">
                                                                        {% for image in product.images %}
                                                                        <div class="col-xs-4 emercado_background_color_whitesmoke" onclick="display_image('{{image.id}}')" style="display:contents">
                                                                            <img id="product_image{{image.id}}" class="emercado_menu_sub_pic" src="/Post_Media/{{image.file_name}}" />
                                                                        </div>
                                                                        {% endfor %}
                                                                    </div>
                                                                </div>
                                                                <a class="left carousel-control"  data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
                                                                <a class="right carousel-control"  data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
                                                            </div> -->
                                                            <script>
                                                                function display_image(image_id) {
                                                                    $('.carousel-inner .emercado_background_color_whitesmoke').removeClass('active');
                                                                    $('#product.images' + image_id).parent().addClass('active');
                                                                    $('#default_images').attr('src', $('#product.images' + image_id).attr('src'));
                                                                }
                                                            </script>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto" style="margin-top: 15px; text-align: center; font-size: large;">
                                                    <i class="heart fa fa-heart-o" style="color: red; font-size: 20px; cursor: pointer;"></i>
                                                    <h5 style="display: contents;">Add to Favorites</h5>
                                                    </div>
                                                </div>
                                                <div class="details col-sm-12 col-md-8 col-lg-7 py-4">
                                                    <h3 class="text-capitalize emercado_text_overflow">{{product.product_name}}</h3>
                                                    <div class="emercado_background_color_3" style="padding: 1rem; margin-bottom: 3rem;">
                                                    <h3 class="m-0 emercado_price text-center"><span class="h5 emercado_sub_price">₱350.99</span> <span id="price_val"><script>document.write(CurrencyConverter({{product.original_price}}))</script></span></h3>
                                                    <input hidden id="selling_price{{product.product_id}}" value="{{product.original_price}}">
                                                    </div>


                                                    <div class="row w-100 m-auto mb-3">
                                                        <div class="col-12 col-sm-12 col-md-4 col-lg-3 col-xl-3 p-0">
                                                        <h5 class="mt-0" style="display: content;">Shop Vouchers</h5>
                                                        </div>
                                                        <!-- end col -->
                                                        <div class="col-12 col-sm-12 col-md-8 col-lg-9 p-0 mb-3" style="min-height: 32px;">
                                                        <div class="row w-100 m-auto">
                                                            <div class="col-6 col-sm-3 col-md-3 col-lg-3 px-2 text-center mb-2">
                                                            <div class="mini-vouchers__mask ">
                                                                <span class="voucher-ticket--seller-mini-solid d-block">8% OFF</span>
                                                            </div>
                                                            </div>
                                                            <div class="col-6 col-sm-3 col-md-3 col-lg-3 px-2 text-center mb-2">
                                                            <div class="mini-vouchers__mask ">
                                                                <span class="voucher-ticket--seller-mini-solid d-block">10% OFF</span>
                                                            </div>
                                                            </div>
                                                            <div class="col-6 col-sm-3 col-md-3 col-lg-3 px-2 text-center mb-2">
                                                            <div class="mini-vouchers__mask ">
                                                                <span class="voucher-ticket--seller-mini-solid d-block">12% OFF</span>
                                                            </div>
                                                            </div>
                                                            <div class="col-6 col-sm-3 col-md-3 col-lg-3 px-2 text-center mb-2">
                                                            <div class="mini-vouchers__mask ">
                                                                <span class="voucher-ticket--seller-mini-solid d-block">20% OFF</span>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        </div>
                                                    </div>


                                                    <div class="row w-100 m-auto mb-3">
                                                    <div class="col-12 col-sm-12 col-md-4 col-lg-3 col-xl-3 p-0 txt" style=" align-self: center; ">
                                                        <div class="d-flex">
                                                            <i style="padding-right: 5px;" class="bi bi-truck"></i><span><h5>Shipping</h5></span>
                                                        </div>
                                                    </div>
                                                    <!-- end col -->
                                                    <div class="col-sm-12 col-md-8 col-lg-9 xl-9 p-0">
                                                        <div class="row w-100 m-auto">
                                                        <div class="col-12 col-sm-3 col-md-4 col-lg-4 col-xl-4 p-0">
                                                            <h5 class="my-2">Shipping To:</h5>
                                                        </div>
                                                        <div class="col-12 col-sm-9 col-md-8 col-lg-8 col-xl-8 p-0">
                                                            <p class="emercado_text_overflow">Diri ang address asa eship</p>
                                                        </div>
                                                        </div>
                                                        <div class="row w-100 m-auto">
                                                        <div class="col-12 col-sm-3 col-md-4 col-lg-4 col-xl-4 p-0">
                                                            <h5 class="my-0">Shipping Fee:</h5>
                                                        </div>
                                                        <div class="col-12 col-sm-9 col-md-8 col-lg-8 col-xl-8 p-0">
                                                            <p class="emercado_text_overflow">Diri ang shipping fees</p>
                                                        </div>
                                                        </div>
                                                    </div>
                                                    </div>


                                                    {% if product.variants %}
                                                    <div class="row w-100 m-auto mb-3">
                                                    <div class="col-12 col-sm-12 col-md-4 col-lg-3 col-xl-3 p-0">
                                                        <h5 class="mt-0">Variants</h5>
                                                    </div>
                                                    <!-- end col -->


                                                    <div class="col-sm-12 col-md-8 col-lg-9 xl-9 p-0">
                                                        {% for attr,opt in  product.variants %}
                                                        <div class="row w-100 m-auto">
                                                            <div class="col-12 col-sm-3 col-md-3 col-lg-2 p-0">
                                                                <h5 class="mt-0">{{attr.attribute_name}}:</h5>
                                                            </div>
                                                            <div class="col-12 col-sm-9 col-md-9 col-lg-10 p-0">
                                                                <div class="row w-100 m-auto">
                                                                    {% for obj in opt %}
                                                                    <div class="col-auto mb-3 px-1">
                                                                        <button type="button" id="attr_option{{obj.id}}" class="product-variation product-variation-{{attr.id}} emercado_text_overflow" value="{{obj.id}}" onclick="select_option('{{attr.id}}','{{obj.id}}');get_variant_price1('{{csrf_token}}','{{product.product_id}}')">{{obj.option_name}}</button>
                                                                    </div>
                                                                    {% endfor  %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <input hidden class="opt_val{{product.product_id}}" id="opt_val{{attr.id}}">

                                                        <script>
                                                            $('.product-variation-{{attr.id}}').on('click', function(){
                                                                $('.product-variation-{{attr.id}}').removeClass('selected-variation');
                                                                $(this).addClass('selected-variation');
                                                            });
                                                        </script>
                                                        <!-- <script>
                                                            $(document).ready(function () {
                                                            selected_option('{{attr.variation_options}}','product-variation-{{attr.id}}')
                                                            });

                                                            $('.product-variation-{{attr.id}}').on('click', function(){
                                                                $('.product-variation-{{attr.id}}').removeClass('selected-variation');
                                                                $(this).addClass('selected-variation');
                                                            });
                                                        </script> -->
                                                        {% endfor %}
                                                    </div>
                                                    </div>
                                                    {% endif %}
                                                    <div class="row w-100 m-auto mb-3">
                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 p-0" style=" align-self: center; ">
                                                        <h5 class="mt-0">Add Ons</h5>
                                                    </div>
                                                    <!-- end col -->
                                                    <div class="col-sm-12 col-md-9 col-lg-9 xl-9 p-0" style="overflow: auto;">
                                                        <table style="min-width: 100% !important;" class="table table-responsive m-0 border">
                                                        <thead class="thead-primary">
                                                            <tr>
                                                            <th><input type="checkbox" class="checkAll" name="checkAll"/></th>
                                                            <th style="white-space: nowrap">Product Name</th>
                                                            <th style="white-space: nowrap">Price</th>
                                                            <th style="white-space: nowrap">Quantity</th>
                                                            <th style="white-space: nowrap">Total Price</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                            <td><input type="checkbox" name="check" class="product_cart"/></td>
                                                            <td style="white-space: nowrap">Shades</td>
                                                            <td style="white-space: nowrap">P1000.00</td>
                                                            <td style="white-space: nowrap">
                                                                <div class="qty-input borders" style="display: flex; justify-content: space-between;">
                                                                <button class="qty-count qty-count--minus" data-action="minus" type="button">-</button>
                                                                <input class="product-qty" type="number" name="product-qty" min="0" value="1">
                                                                <button class="qty-count qty-count--add" data-action="add" type="button">+</button>
                                                                </div>
                                                            </td>
                                                            <td style="white-space: nowrap">P1000.00</td>
                                                            </tr>
                                                        </tbody>
                                                        </table>
                                                    </div>
                                                    </div>


                                                    <div class="row w-100 m-auto mb-3" style="margin-top: 5rem;">
                                                    <div class="col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3 p-0">
                                                        <h5 class="mt-0">Quantity: </h5>
                                                    </div>
                                                    <div class="col-sm-12 col-md-9 col-lg-9 xl-9 p-0">
                                                        <div class="row w-100 m-auto">
                                                        <div class="col-6 col-sm-5 col-md-4 col-lg-4 col-xl-4 p-0">
                                                            <div class="qty-input borders" style="display: flex; justify-content: space-between;">
                                                            <button class="qty-count qty-count--minus" data-action="minus" type="button">-</button>
                                                            <input id="quantity{{product.product_id}}" class="product-qty" type="number" name="quantity" min="0" value="1">
                                                            <button class="qty-count qty-count--add" data-action="add" type="button">+</button>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-sm-7 col-md-8 col-lg-8 col-xl-8  text-center" style="align-self: center;">
                                                            {% if product.status_type == 1 %}
                                                                {% if product.stock > 0%}
                                                                    <h5 class="my-0">{{product.stock}} pieces available</h5>
                                                                {% else %}
                                                                    <h5 class="my-0">Sold Out</h5>
                                                                    <script>
                                                                        $(document).ready(function () {
                                                                            document.getElementById("menus").disabled = true;
                                                                        });
                                                                    </script>
                                                                {% endif %}
                                                                {% else %}
                                                                {% if product.available_flag == 1 %}
                                                                    <h5 class="my-0" style="color:green; font-size: 14px;">Available</h5>
                                                                {% else %}
                                                                    <h5 class="my-0" style="color:red">Unavailable</h5>
                                                                    <script>
                                                                        $(document).ready(function () {
                                                                            document.getElementById("menus").disabled = true;
                                                                        });
                                                                    </script>
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                        </div>
                                                    </div>
                                                    </div>

                                                    <div class="row w-100 m-auto" style="margin-top: 1rem;">
                                                        <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 mb-3 p-1">
                                                            <button type="button" class="btn emercado_add_to_cart_btn text-white btn-block" onclick="add_to_cart1('{{csrf_token}}','{{product.product_id}}')">
                                                                <span class="icon p-0">
                                                                    <i class="fa fa-cart-shopping"></i>
                                                                </span>
                                                                <span class="text px-2">Add To Cart</span>
                                                            </button>
                                                        </div>
                                                        <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 mb-3 p-1">
                                                            <button type="button" class="btn btn-orange text-white btn-block" onclick="quick_place_order('{{csrf_token}}','{{product.product_id}}')">
                                                                <span class="text px-2">Buy Now</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="wrapper row w-100 m-auto p-3">
                                                <div class="emercado_background_color_3" style="padding: 1rem;">
                                                    <h4>Product Description</h4>
                                                </div>
                                                <div class="p-3">
                                                    <p style="white-space: break-spaces; overflow-wrap: break-word;">{{product.description}}</p>
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <script>
                                $(document).ready(function () {
                                    disable_product("{{csrf_token}}","{{product.product_id}}")
                                    disable_product_variation("{{csrf_token}}","{{product.product_id}}")
                                });
                                </script>
                                {% endfor %}
                            </div>
                        </div>
                    </section>
                </div>
            </section>
        </section>
    </main><!-- End #main -->
    <section id="sticky_purchase" class="container-fluid emercado_background_color_2 p-0 shadow" style="bottom: 0px; z-index: 1;">
        <div class="container-fluid p-2" style="border-top: 1px solid #9688FE !important;">
            <div class="w-100 m-auto category_md d-flex m-0" style=" justify-content: space-evenly; ">
                <a class="px-1 text-decoration-none text-center" href="{% url 'my_purchases' %}">
                    <div class="icon-wrapper">
                        <i class="fa-solid fa-wallet coupon_icon emercado_color_1"></i>
                    </div>
                    <h6 class="text-black my-2" style="font-size: calc(8px + 100vw * 7/1906);">My Orders</h6>
                </a>
                <a class="px-1 text-decoration-none text-center" href="{% url 'coupons' %}">
                    <div class="icon-wrapper">
                        <i class="fa fa-ticket coupon_icon emercado_color_1"></i>
                    </div>
                    <h6 class="text-black my-2" style="font-size: calc(8px + 100vw * 7/1906);">Vouchers</h6>
                </a>

                <a class="px-1 text-decoration-none text-center" href="#" style="position: absolute; top: -55px !important; background: #fff; width: calc(100vw * 90/1906); height: calc(100vw * 90/1906); min-width: 65px !important; min-height: 65px !important; display: flex; justify-content: center; flex-direction: column; border: 1px solid #9688FE !important; border-radius: 50% !important;"
                data-toggle="modal" data-target="#Modal">
                    <div class="icon-wrapper">
                        <i class="fa fa-qrcode coupon_icon emercado_color_1"></i>
                    </div>
                    <div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" data-keyboard="false" aria-hidden="true" data-backdrop="false"
                    style="background-color:rgba(0,0,0,0.5);" data-dismiss="modal">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title text-black" id="exampleModalLabel">QR Code Scanner</h5>
                                  <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                                    <span style="font-size: 20px;" aria-hidden="true">×</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <video style="width: -webkit-fill-available;" id="preview"></video>
                                  <div id="resultDiv"></div>
                                </div>
                                <div class="modal-footer">
                                  <button class="btn btn-secondary" type="button" data-dismiss="modal" id="stopBtn">Stop Scanning</button>
                                  <button class="btn btn-orange text-white" type="button" id="startBtn">Start Scanning</button>
                                </div>
                                <script type="text/javascript">
                                  let scanner = null;
                                  let resultDiv = document.getElementById('resultDiv');
                                  let modal = document.getElementById('exampleModal');

                                  function startScanner() {
                                    scanner = new Instascan.Scanner({ video: document.getElementById('preview') });

                                    scanner.addListener('scan', function (content) {
                                      // Extract the order ID from the scanned content
                                      let orderId = content.replace(/[^0-9]/g, '');

                                      // Display message and button in the result div
                                      resultDiv.innerHTML = '<p>Do you want to view the order in order# ' + orderId +' ?</p><button id="viewOrderBtn" class="btn btn-orange text-white">View Order</button>';

                                      // Add event listener to the button
                                      let viewOrderBtn = document.getElementById('viewOrderBtn');
                                      viewOrderBtn.addEventListener('click', function() {
                                        // Send request to backend to get order information
                                        fetch('/getOrderInfo/' + orderId)
                                          .then(response => response.json())
                                          .then(data => {
                                            // Create a table with the order information
                                            let tableHtml = '<table>';
                                            for (let [key, value] of Object.entries(data)) {
                                              tableHtml += '<tr><td>' + key + '</td><td>' + value + '</td></tr>';
                                            }
                                            tableHtml += '</table>';

                                            // Display order information in a modal
                                            resultDiv.innerHTML = '<div class="modal-body">' + tableHtml + '</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div>';
                                            $('#exampleModal').modal('show');
                                          })
                                          .catch(error => console.error(error));
                                      });
                                    });

                                    Instascan.Camera.getCameras().then(function (cameras) {
                                      if (cameras.length > 0) {
                                        scanner.start(cameras[0]);
                                      } else {
                                        console.error('No cameras found.');
                                      }
                                    }).catch(function (e) {
                                      console.error(e);
                                    });
                                  }

                                  function stopScanner() {
                                    scanner.stop();
                                    alert('Scanning stopped');
                                  }

                                  $('#exampleModal').on('hidden.bs.modal', function (e) {
                                    stopScanner();
                                  });

                                  document.getElementById('stopBtn').addEventListener('click', function() {
                                    stopScanner();
                                  });

                                  document.getElementById('startBtn').addEventListener('click', function() {
                                    startScanner();
                                    alert('Scanning started');
                                    modal.setAttribute('data-backdrop', 'static');
                                    modal.setAttribute('data-keyboard', false);
                                  });

                                </script>
                              </div>
                        </div>
                     </div>
                </a>


                <a class="px-1 text-decoration-none text-center" href="#">
                    <div class="icon-wrapper">
                        <i class="fa fa-gift coupon_icon emercado_color_1"></i>
                    </div>
                    <h6 class="text-black my-2" style="font-size: calc(8px + 100vw * 7/1906);">Gift Checks</h6>
                </a>
                <a class="px-1 text-decoration-none text-center" href="{% url 'rewards' %}">
                    <div class="icon-wrapper">
                        <i class="fas fa-award coupon_icon emercado_color_1"></i>
                    </div>
                    <h6 class="text-black my-2" style="font-size: calc(8px + 100vw * 7/1906);">Rewards</h6>
                </a>
                <!-- <a class="col-4 col-sm-2 col-md-2 col-lg-2 col-xl-2 mt-2 text-decoration-none text-center" id="menu-links"  href="#contacts">
                    <div class="icon-wrapper">
                        <i class="fa-solid fa-square-phone coupon_icon" style="color: #9688FE"></i>
                    </div>
                    <h6 class="text-black">Contacts</h6>
                </a> -->
            </div>
        </div>
    </section>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    <footer class="emercado_color_1" style="border-top: 6px solid;">
      <section class="container m-auto" id="contacts">
          <div class="footer_contacts p-2">
              <div class="row w-100 m-auto">
                  <div class="col-6 col-sm-6 col-md-3 col-lg-3 col-xl-3">
                      <div class="custom_service">
                          <ul class="list-unstyled">
                          <h4 class="emercado_color_1">Customer Service</h4>
                             <li><a class="footer_text text-black" href="#"> Help Centre</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Cash PH</a></li>
                             <li><a class="footer_text text-black" href="#"> Payment Methods</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Pay</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Coins</a></li>
                             <li><a class="footer_text text-black" href="#"> Order Tracking</a></li>
                             <li><a class="footer_text text-black" href="#"> Return and Refund</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Guarantee</a></li>
                             <li><a class="footer_text text-black" href="#"> Overseas Products</a></li>
                             <li><a class="footer_text text-black" href="#"> Contact Us</a></li>
                          </ul>
                      </div>
                  </div>
                  <div class=" col-6 col-sm-6 col-md-3 col-lg-3 col-xl-3">
                      <div class="custom_service">
                          <ul class="list-unstyled">
                          <h4 class="emercado_color_1">About Checkout</h4>
                             <li><a class="footer_text text-black" href="#"> Checkout Blog</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Career</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Policies</a></li>
                             <li><a class="footer_text text-black" href="#"> Privacy Policy</a></li>
                             <li><a class="footer_text text-black" href="#"> Checkout Mall</a></li>
                             <li><a class="footer_text text-black" href="#"> Seller Centre</a></li>
                             <li><a class="footer_text text-black" href="#"> Flash Deals</a></li>
                             <li><a class="footer_text text-black" href="#"> Media Contact</a></li>
                          </ul>
                      </div>
                  </div>
                  <div class=" col-6 col-sm-6 col-md-3 col-lg-3 col-xl-3">
                    <div class="custom_service">
                        <ul class="list-unstyled">
                        <h4 class="emercado_color_1">Payment</h4>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/paymaya.png' %}" alt=""><a class="footer_text text-black" href="#" style="padding-left: 5px;"> PayMaya</a></li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/visa.png' %}" alt=""><a class="footer_text text-black" href="#" style="padding-left: 5px;"> Visa</a></li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/gcash.png' %}" alt=""><a class="footer_text text-black" href="#" style="padding-left: 5px;"> GCash</a></li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/paypal.png' %}" alt=""><a class="footer_text text-black" href="#" style="padding-left: 5px;"> Paypal</a></li>
                        </ul>
                    </div>
                </div>
                <div class=" col-6 col-sm-6 col-md-3 col-lg-3 col-xl-3">
                    <div class="custom_service">
                        <ul class="list-unstyled">
                        <h4 class="emercado_color_1">Follow Us</h4>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/fb.png' %}" alt="">
                            <a  class="footer_text text-black" href="#" style="padding-left: 5px;">Facebook</a>
                        </li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/twitter.png' %}" alt="">
                            <a  class="footer_text text-black" href="#" style="padding-left: 5px;">Twitter</a>
                        </li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/in.png' %}" alt="">
                            <a  class="footer_text text-black" href="#" style="padding-left: 5px;">LinkedIn</a>
                        </li>
                        <li class="py-2"><img class="footer_img" src="{% static 'img/consumer/insta.jpg' %}" alt="">
                            <a  class="footer_text text-black" href="#" style="padding-left: 5px;">Instagram</a>
                        </li>
                        </ul>
                    </div>
                </div>
              </div>
          </div>
      </section>
    </footer>

    <script src="{% static 'js/store.js' %}"></script>
    <script src="{% static 'js/google_map.js' %}"></script>
    <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/glightbox/js/glightbox.min..js' %}"></script>
    <script src="{% static 'vendor/isotope-layout/isotope.pkgd.min..js' %}"></script>
    <script src="{% static 'vendor/swiper/swiper-bundle.min..js' %}"></script>
    <script src="{% static 'vendor/php-email-form/validate..js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Template Main JS File -->

    <script>
        $("#myModal").modal({backdrop: "static", keyboard: false});
     /* Demo purposes only */
    $(".hover").mouseleave(
        function () {
        $(this).removeClass("hover");
        }
    );

    // $('#Modal').on('click', '.modal-content', function(e) {
    //     e.stopPropagation();
    // });

    let modal = document.getElementById('Modal');
        modal.addEventListener('shown.bs.modal', function () {
        scanner.stop();
        });
    </script>

    <script>
        var prevScrollpos = window.pageYOffset;
        window.onscroll = function() {
        var currentScrollPos = window.pageYOffset;
          if (prevScrollpos > currentScrollPos) {
            document.getElementById("sticky_purchase").style.bottom = "0";
          } else {
            document.getElementById("sticky_purchase").style.bottom = "-200px";
          }
          prevScrollpos = currentScrollPos;
        }
    </script>


    <script>
        var QtyInput = (function () {
        var $qtyInputs = $(".qty-input");

        if (!$qtyInputs.length) {
            return;
        }

        var $inputs = $qtyInputs.find(".product-qty");
        var $countBtn = $qtyInputs.find(".qty-count");
        var qtyMin = parseInt($inputs.attr("min"));
        var qtyMax = parseInt($inputs.attr("max"));

        $inputs.change(function () {
            var $this = $(this);
            var $minusBtn = $this.siblings(".qty-count--minus");
            var $addBtn = $this.siblings(".qty-count--add");
            var qty = parseInt($this.val());

            if (isNaN(qty) || qty <= qtyMin) {
            $this.val(qtyMin);
            $minusBtn.attr("disabled", true);
            } else {
            $minusBtn.attr("disabled", false);

            if(qty >= qtyMax){
                $this.val(qtyMax);
                $addBtn.attr('disabled', true);
            } else {
                $this.val(qty);
                $addBtn.attr('disabled', false);
            }
            }
        });

        $countBtn.click(function () {
            var operator = this.dataset.action;
            var $this = $(this);
            var $input = $this.siblings(".product-qty");
            var qty = parseInt($input.val());

            if (operator == "add") {
            qty += 1;
            if (qty >= qtyMin + 1) {
                $this.siblings(".qty-count--minus").attr("disabled", false);
            }

            if (qty >= qtyMax) {
                $this.attr("disabled", true);
            }
            } else {
            qty = qty <= qtyMin ? qtyMin : (qty -= 1);

            if (qty == qtyMin) {
                $this.attr("disabled", true);
            }

            if (qty < qtyMax) {
                $this.siblings(".qty-count--add").attr("disabled", false);
            }
            }

            $input.val(qty);
        });
        })();

        $(".heart.fa").click(function() {
    $(this).toggleClass("fa-heart fa-heart-o");
    });


    </script>

<script>
    $(document).ready(function () {
    var itemsMainDiv = ('.MultiCarousel');
    var itemsDiv = ('.MultiCarousel-inner');
    var itemWidth = "";

    $('.leftLst, .rightLst').click(function () {
        var condition = $(this).hasClass("leftLst");
        if (condition)
            click(0, this);
        else
            click(1, this)
    });
    ResCarouselSize();

    $(window).resize(function () {
        ResCarouselSize();
    });

    //this function define the size of the items
    function ResCarouselSize() {
        var incno = 0;
        var dataItems = ("data-items");
        var itemClass = ('.item');
        var id = 0;
        var btnParentSb = '';
        var itemsSplit = '';
        var sampwidth = $(itemsMainDiv).width();
        var bodyWidth = $('body').width();
        $(itemsDiv).each(function () {
        id = id + 1;
        var itemNumbers = $(this).find(itemClass).length;
        btnParentSb = $(this).parent().attr(dataItems);
        itemsSplit = btnParentSb.split(',');
        $(this).parent().attr("id", "MultiCarousel" + id);

        if (bodyWidth >= 1200) {
            incno = itemsSplit[3];
            itemWidth = sampwidth / incno;
        }
        else if (bodyWidth >= 992) {
            incno = itemsSplit[2];
            itemWidth = sampwidth / incno;
        }
        else if (bodyWidth >= 768) {
            incno = itemsSplit[1];
            itemWidth = sampwidth / incno;
        }
        else {
            incno = itemsSplit[0];
            itemWidth = sampwidth / incno;
        }
        $(this).css({ 'transform': 'translateX(0px)', 'width': itemWidth * itemNumbers });
        $(this).find(itemClass).each(function () {
            $(this).outerWidth(itemWidth);
        });

        $(".leftLst").addClass("over");
        $(".rightLst").removeClass("over");
        });
    }

    //this function used to move the items
    function ResCarousel(e, el, s) {
        var leftBtn = ('.leftLst');
        var rightBtn = ('.rightLst');
        var translateXval = '';
        var divStyle = $(el + ' ' + itemsDiv).css('transform');
        var values = divStyle.match(/-?[\d\.]+/g);
        var xds = Math.abs(values[4]);
        if (e == 0) {
            translateXval = parseInt(xds) - parseInt(itemWidth * s);
            $(el + ' ' + rightBtn).removeClass("over");

            if (translateXval <= itemWidth / 2) {
                translateXval = 0;
                $(el + ' ' + leftBtn).addClass("over");
            }
        }
        else if (e == 1) {
            var itemsCondition = $(el).find(itemsDiv).width() - $(el).width();
            translateXval = parseInt(xds) + parseInt(itemWidth * s);
            $(el + ' ' + leftBtn).removeClass("over");

            if (translateXval >= itemsCondition - itemWidth / 2) {
                translateXval = itemsCondition;
                $(el + ' ' + rightBtn).addClass("over");
            }
        }
        $(el + ' ' + itemsDiv).css('transform', 'translateX(' + -translateXval + 'px)');
    }

    //It is used to get some elements from btn
    function click(ell, ee) {
        var Parent = "#" + $(ee).parent().attr("id");
        var slide = $(Parent).attr("data-slide");
        ResCarousel(ell, Parent, slide);
    }
    });
</script>


<script>
    let items = document.querySelectorAll('.carousel .carousel-item')

        items.forEach((el) => {
            const minPerSlide = 4
            let next = el.nextElementSibling
            for (var i=1; i<minPerSlide; i++) {
                if (!next) {
            // wrap carousel by using first child
            next = items[0]
        }
        let cloneChild = next.cloneNode(true)
        el.appendChild(cloneChild.children[0])
        next = next.nextElementSibling
        }
    })
</script>

    <script>
        function menuToggle() {
        const toggleMenu = document.querySelector(".menu");
        toggleMenu.classList.toggle("active");
        }
    </script>

    <script>
        const searchBox = document.getElementById('searchBox');
        const suggestions = document.getElementById('suggestions');
        const searchForm = document.getElementById('searchForm');

        searchBox.addEventListener('input', function () {
        if (this.value) {
            sortSuggestions(this.value);
            suggestions.classList.remove('hidden');
        } else {
            suggestions.classList.add('hidden');
        }
        });

        searchForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const suggestionItems = Array.from(suggestions.children);
        const storeName = searchBox.value;
        const store = suggestionItems.find(item => item.getAttribute('data-store-name').toLowerCase() === storeName.toLowerCase());
        if (store) {
            const storeId = store.getAttribute('data-store-id');
            window.location.href = `/store/${storeId}`;
        } else {
            alert("Store not found. Please try again.");
        }
        });

        function sortSuggestions(searchTerm) {
        const suggestionItems = Array.from(suggestions.children);
        suggestionItems.sort((a, b) => {
            const aStoreName = a.getAttribute('data-store-name').toLowerCase();
            const bStoreName = b.getAttribute('data-store-name').toLowerCase();
            if (aStoreName.startsWith(searchTerm.toLowerCase())) {
            return -1;
            } else if (bStoreName.startsWith(searchTerm.toLowerCase())) {
            return 1;
            } else {
            return aStoreName.localeCompare(bStoreName);
            }
        });
        suggestionItems.splice(3);
        suggestions.innerHTML = '';
        suggestionItems.forEach(item => suggestions.appendChild(item));
        }
    </script>

<script>
    $(document).ready(function() {
      // Instantiate the Bootstrap carousel
      $('.multi-item-carousel').carousel({
        interval: false
      });

      // for every slide in carousel, copy the next slide's item in the slide.
      // Do the same for the next, next item.
      $('.multi-item-carousel .item').each(function() {
        var next = $(this).next();
        if (!next.length) {
          next = $(this).siblings(':first');
        }
        next.children(':first-child').clone().appendTo($(this));

        if (next.next().length > 0) {
          next.next().children(':first-child').clone().appendTo($(this));
        } else {
          $(this).siblings(':first').children(':first-child').clone().appendTo($(this));
        }
      });
    });
</script>

<script>
function menuToggle() {
  const toggleMenu = document.querySelector(".menu");
  toggleMenu.classList.toggle("active");
}

$(document).ready(function() {
  unread_notifications('{{csrf_token}}')
});
$("#notif_dropdown").click(function() {
  read_notifications('{{csrf_token}}')
});
</script>
<!-- <script>
    const stars = document.querySelectorAll('.star-rating input');

for (let i = 0; i < stars.length; i++) {
  stars[i].addEventListener('click', function() {
    for (let j = 0; j < stars.length; j++) {
      if (j <= i) {
        stars[j].checked = true;
      } else {
        stars[j].checked = false;
      }
    }
  });
}

</script> -->
                    

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3Dzg1q3SVdZx8OMq_41sY8VLZ7vdJNHg&libraries=places&callback=initialize"></script>
<script>
    var map;
    var userMarker;
  
    function initialize() {
        var autocomplete = new google.maps.places.Autocomplete(document.getElementById("txtautocomplete"));

        // Set up map
        map = new google.maps.Map(document.getElementById("map"), {
            zoom: 12,
            mapTypeId: "roadmap",
            mapTypeControl: true
        });

        // Initialize user marker
        var userMarker;

        // Get user's location and continuously track it
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(function(position) {
                var userLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

                // Set map's center to user's location
                map.setCenter(userLocation);
                map.setZoom(15);

                // If user marker already exists, move it to the new location
                if (userMarker) {
                    userMarker.setPosition(userLocation);
                }
                // If user marker does not exist, create it
                else {
                    userMarker = new google.maps.Marker({
                        position: userLocation,
                        map: map,
                        title: "Your location",
                        icon: {
                            url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                        }
                    });
                }

                // Update the coordinates element
                var latLng = userMarker.getPosition();
                document.getElementById('coordinates').innerHTML = "Green Marker Coordinates: " + latLng.lat() + ", " + latLng.lng();

                // Display the stores nearest to farthest based on the user's location
                displayNearestStores(userLocation);
            });

            // Add event listener to map to update marker position on click
            map.addListener('click', function(event) {
                // If user marker already exists, move it to the clicked location
                if (userMarker) {
                    userMarker.setPosition(event.latLng);
                }
                // If user marker does not exist, create it
                else {
                    userMarker = new google.maps.Marker({
                        position: event.latLng,
                        map: map,
                        title: "Your location",
                        icon: {
                            url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                        }
                    });
                }

                // Update the coordinates element
                var latLng = userMarker.getPosition();
                document.getElementById('coordinates').innerHTML = "Green Marker Coordinates: " + latLng.lat() + ", " + latLng.lng();

                // Display the stores nearest to farthest based on the clicked location
                displayNearestStores(event.latLng);
            });

            // Initialize the user marker at the center of the map
            userMarker = new google.maps.Marker({
                position: map.getCenter(),
                map: map,
                title: "Your location",
                icon: {
                    url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                }
            });

            // Update the coordinates element
            var latLng = userMarker.getPosition();
            document.getElementById('coordinates').innerHTML = "Green Marker Coordinates: " + latLng.lat().toFixed(6) + ", " + latLng.lng().toFixed(6);


            // Display the stores nearest to farthest based on the user's location
            displayNearestStores(map.getCenter());
        }

        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place = autocomplete.getPlace();

            // Hide user's location marker if it exists
            if (userMarker) {
                userMarker.setMap(null);
            }

            // Create a new marker for the inputted location
            var newMarker = new google.maps.Marker({
                position: place.geometry.location,
                map: map,
                title: "Your location",
                icon: {
                    url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                }
            });

            // Set the new marker as the userMarker object
            userMarker = newMarker;

            // Update the map center to the inputted location
            map.setCenter(place.geometry.location);
            map.setZoom(15);

            // Update the coordinates element
            var latLng = userMarker.getPosition();
            document.getElementById('coordinates').innerHTML = "Green Marker Coordinates: " + latLng.lat() + ", " + latLng.lng();

            // Display the stores nearest to farthest based on the inputted location
            displayNearestStores(place.geometry.location);

            // Set latitude and longitude values in hidden inputs
            document.getElementById('adlatitude').value = place.geometry.location.lat();
            document.getElementById('adlongitude').value = place.geometry.location.lng();
        });
    }

  
    function displayNearestStores(userLocation) {
        // Retrieve registered stores from the database
        var stores = [
        {% for store in stores %}
            {
            name: "{{ store.store_name }}",
            lat: {{ store.latitude }},
            lng: {{ store.longitude }},
            storeName: "{{ store.store_name }}",
            },
        {% endfor %}
        ];

        // Define the custom marker image
        var markerImage = {
            url: 'http://localhost:8000/static/images/location_map.png',
            size: new google.maps.Size(50, 50),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(25, 25)
        };

        // Add markers for each store using the custom marker icon
        for (var i = 0; i < stores.length; i++) {
            var storeLocation = new google.maps.LatLng(stores[i].lat, stores[i].lng);
            var marker = new google.maps.Marker({
                position: storeLocation,
                map: map,
                title: stores[i].name,
                icon: markerImage
            });

            // Add click event listener to marker
            marker.addListener('click', function() {
                // Display the store's name in an info window
                var infowindow = new google.maps.InfoWindow({
                    content: '<div><strong>' + this.getTitle() + '</strong><br><a href="https://www.google.com/maps/dir/?api=1&destination=' + this.getPosition().lat() + ',' + this.getPosition().lng() + '&travelmode=driving" target="_blank">Get Directions</a></div>'
                });
                infowindow.open(map, this);
            });
        }
    }
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>


<script>
    $(document).ready(function() {
      // Instantiate the Bootstrap carousel
      $('.multi-item-carousel').carousel({
        interval: false
      });

      // for every slide in carousel, copy the next slide's item in the slide.
      // Do the same for the next, next item.
      $('.multi-item-carousel .item').each(function() {
        var next = $(this).next();
        if (!next.length) {
          next = $(this).siblings(':first');
        }
        next.children(':first-child').clone().appendTo($(this));

        if (next.next().length > 0) {
          next.next().children(':first-child').clone().appendTo($(this));
        } else {
          $(this).siblings(':first').children(':first-child').clone().appendTo($(this));
        }
      });
    });
</script>

<script>
function menuToggle() {
  const toggleMenu = document.querySelector(".menu");
  toggleMenu.classList.toggle("active");
}

$(document).ready(function() {
  unread_notifications('{{csrf_token}}')
});
$("#notif_dropdown").click(function() {
  read_notifications('{{csrf_token}}')
});
</script>

<script>//search for store
    function showDropdown() {
    const input = document.getElementById("searchBox");
    const suggestions = document.getElementById("suggestions");
    const stores = suggestions.querySelectorAll("li[data-type='store']");
    const products = suggestions.querySelectorAll("li[data-type='product']");
    const query = input.value.toLowerCase();

    // Filter the stores and products based on the input value
    const filteredStores = Array.from(stores).filter(store =>
        store.getAttribute("data-store-name").toLowerCase().includes(query)
    );
    const filteredProducts = Array.from(products).filter(product =>
        product.getAttribute("data-product-name").toLowerCase().includes(query)
    );

    // Sort the filtered stores and products alphabetically
    const sortedStores = filteredStores.sort((a, b) =>
        a.getAttribute("data-store-name").localeCompare(b.getAttribute("data-store-name"))
    );
    const sortedProducts = filteredProducts.sort((a, b) =>
        a.getAttribute("data-product-name").localeCompare(b.getAttribute("data-product-name"))
    );

    // Clear the existing suggestions and append the sorted results
    suggestions.innerHTML = "";
    sortedStores.forEach(store => suggestions.appendChild(store));
    sortedProducts.forEach(product => suggestions.appendChild(product));

    // Show or hide the suggestions based on the input value
    if (input.value.length > 0) {
        suggestions.classList.remove("hidden");
    } else {
        suggestions.classList.add("hidden");
    }
    }
</script>  
<script>// search for product
    function showDropdown2() {
    const input = document.getElementById("searchBox2");
    const suggestions = document.getElementById("suggestions2");
    const stores = suggestions.querySelectorAll("li[data-type='store']");
    const products = suggestions.querySelectorAll("li[data-type='product']");
    const query = input.value.toLowerCase();

    // Filter the stores and products based on the input value
    const filteredStores = Array.from(stores).filter(store =>
        store.getAttribute("data-store-name").toLowerCase().includes(query)
    );
    const filteredProducts = Array.from(products).filter(product =>
        product.getAttribute("data-product-name").toLowerCase().includes(query)
    );

    // Sort the filtered stores and products alphabetically
    const sortedStores = filteredStores.sort((a, b) =>
        a.getAttribute("data-store-name").localeCompare(b.getAttribute("data-store-name"))
    );
    const sortedProducts = filteredProducts.sort((a, b) =>
        a.getAttribute("data-product-name").localeCompare(b.getAttribute("data-product-name"))
    );

    // Clear the existing suggestions and append the sorted results
    suggestions.innerHTML = "";
    sortedStores.forEach(store => suggestions.appendChild(store));
    sortedProducts.forEach(product => suggestions.appendChild(product));

    // Show or hide the suggestions based on the input value
    if (input.value.length > 0) {
        suggestions.classList.remove("hidden");
    } else {
        suggestions.classList.add("hidden");
    }
    }
</script>



</body>

</html>
